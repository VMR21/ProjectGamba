<!DOCTYPE html>
<html lang="en">
<head>
    <title>ProjectGamba - Slot Picker</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ProjectGamba Slot Picker.">
    <meta property="og:image" content="https://i.ibb.co/BKrK7Dr6/image.png">
    <link rel="icon" type="image/jpg" href="/assets/logo1.png">
    <!-- Original CSS files for the ProjectGamba design -->
    <link rel="stylesheet" type="text/css" href="/css/app.css">
    <link rel="stylesheet" type="text/css" href="/css/lb.css">
    <link rel="stylesheet" type="text/css" href="/css/vendor.css">
    <link rel="stylesheet" type="text/css" href="/css/cards.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/css/toast.css">
    <!-- New font for the Slot Picker, integrated with existing styles -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;800&display=swap" rel="stylesheet">
    <style>
        /* Original Website Background & Animation Styles */
        body {
            margin: 0;
            padding: 0; /* Let appContent handle padding */
            font-family: Nunito, system-ui, Arial, sans-serif; /* Prioritize Nunito for Slot Picker, but fallback to existing */
            color: #e8ecff; /* Default text color for the site */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* Original background gradients */
            background: radial-gradient(1200px 800px at 15% 0%, #1a1b36 0%, #0c0f16 45%) fixed,
                        radial-gradient(1000px 800px at 90% 30%, #122339 0%, #0c0f16 60%) fixed, #0c0f16;
        }
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        .glow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -1;
        }
        .left-glow, .right-glow {
            position: absolute;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            filter: blur(150px);
            opacity: 0.3;
            background-color: #2775ca;
        }
        .left-glow { top: 10%; left: -10%; }
        .right-glow { bottom: 5%; right: -10%; }
        #leftsvg, #rightsvg {
            position: fixed;
            height: 100%;
            top: 0;
            z-index: -1;
            opacity: 0.1;
        }
        #leftsvg { left: 0; }
        #rightsvg { right: 0; }

        /* Header Styles - Replicated from your original design */
        header {
            background: rgba(0, 0, 0, 0.4);
            padding: 10px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }
        nav {
            max-width: 1150px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo {
            height: 40px;
            width: auto;
        }
        .title {
            color: #2775ca;
            font-size: 28px;
            font-weight: 900;
            margin: 0;
            text-shadow: 0 0 15px rgba(39, 117, 202, 0.7);
        }
        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 20px;
        }
        .nav-links a {
            color: #e8ecff;
            text-decoration: none;
            font-weight: 700;
            font-size: 16px;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .nav-links a:hover {
            background-color: rgba(39, 117, 202, 0.2);
            color: #fff;
        }

        /* Main App Content Wrapper */
        #appContent {
            max-width: 1150px;
            margin: 50px auto; /* Adjust margin to give space around content */
            padding: 0 24px; /* Add padding to the sides */
            flex-grow: 1; /* Allows content to expand and push footer down */
        }
        #appContent > .row.text {
            text-align: center;
            margin-top: 50px;
            margin-bottom: 30px; /* Spacing for the original text rows */
        }
        #appContent > .row.text > .title {
            font-size: 36px;
            font-weight: 800;
            color: #2775ca;
            text-shadow: 0 0 15px rgba(39, 117, 202, 0.7);
        }

        /* Slot Picker Panel Styles - Adapted for transparency and integration */
        .slot-picker-container {
            margin-top: 80px; /* Space from content above */
            margin-bottom: 60px; /* Space before next section/footer */
        }
        .slot-picker-container .slot-picker-title {
            text-align: center;
            font-size: 36px;
            font-weight: 800;
            color: #2775ca;
            text-shadow: 0 0 15px rgba(39, 117, 202, 0.7);
            margin-bottom: 40px;
        }
        .slot-picker-app {
            max-width: 1150px;
            margin: 0 auto; /* Center the slot picker content */
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 24px;
        }
        @media (max-width: 768px) {
            .slot-picker-app {
                grid-template-columns: 1fr; /* Stack columns on smaller screens */
            }
        }
        .slot-picker-app .panel {
            /* Transparent background for the slot picker panels */
            background: rgba(27, 34, 54, 0.7); /* Slightly transparent dark blue */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Lighter, subtle border */
            padding: 18px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35); /* Consistent shadow */
        }
        .slot-picker-app .panel h2 {
            margin: 0 0 12px;
            font-size: 26px;
            color: var(--text); /* Use general text color for internal titles */
        }
        .slot-picker-app .row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 12px 0 6px;
        }
        .slot-picker-app .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .slot-picker-app .chip {
            background: transparent;
            color: var(--text);
            padding: 10px 14px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            font-weight: 800;
            cursor: pointer;
        }
        .slot-picker-app .chip.active {
            background: var(--chip);
            border-color: transparent;
        }
        .slot-picker-app .btn {
            background: var(--btn);
            color: #fff;
            border: 0;
            border-radius: 12px;
            padding: 12px 16px;
            font-weight: 800;
            cursor: pointer;
        }
        .slot-picker-app .btn:hover {
            background: var(--btn-hover);
        }
        .slot-picker-app .right {
            display: grid;
            gap: 16px;
            grid-template-rows: auto 1fr auto;
        }
        .slot-picker-app .card-wrap {
            display: grid;
            place-items: center;
            min-height: 560px;
        }
        .slot-picker-app .card {
            width: 360px;
            aspect-ratio: 720/944;
            height: auto;
            perspective: 1200px;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.45));
        }
        .slot-picker-app .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform .7s cubic-bezier(.2,.7,.2,1);
            border-radius: var(--radius);
            overflow: hidden;
            /* Transparent background for the card inner */
            background: rgba(15, 19, 34, 0.8); /* Slightly more opaque dark blue */
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .slot-picker-app .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .slot-picker-app .face {
            position: absolute;
            inset: 0;
            padding: 12px;
            display: grid;
            place-items: center;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        .slot-picker-app .front {
            background: rgba(21, 27, 43, 0.85); /* Transparent dark background */
        }
        .slot-picker-app .back {
            background: rgba(15, 19, 34, 0.9); /* Transparent dark background */
            transform: rotateY(180deg);
        }
        #slotImgFront, #slotImgBack {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
        }
        #slotImgFront { transform: scaleX(-1); }
        #slotImgBack { transform: none; }
        .slot-picker-app .meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        .slot-picker-app .meta .title {
            font-size: 22px;
            font-weight: 800;
        }
        .slot-picker-app .meta .sub {
            color: var(--muted);
            font-weight: 700;
        }
        .slot-picker-app .foot {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: flex-end;
        }
        .slot-picker-app .pill {
            padding: 8px 10px;
            border-radius: 999px;
            border: 1px dashed rgba(255, 255, 255, 0.18);
            color: var(--muted);
        }

        /* Footer Styles - Replicated from your original design */
        .inner-footer {
            max-width: 1150px;
            margin: 0 auto;
            padding: 24px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.4);
            margin-top: auto;
            color: #e8ecff;
        }
        .inner-footer .col {
            flex: 1;
            min-width: 200px;
        }
        .inner-footer .col-5 {
            flex: 1.5;
            min-width: 250px;
        }
        .inner-footer .title {
            font-size: 18px;
            font-weight: 800;
            color: #2775ca;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(39, 117, 202, 0.5);
        }
        .inner-footer .subtitle {
            font-size: 14px;
            color: #93a1bd;
            line-height: 1.5;
            display: block;
            margin-bottom: 8px;
            text-decoration: none;
        }
        .inner-footer .subtitle:hover {
            color: #2775ca;
        }
        .inner-footer .copyright {
            font-size: 14px;
            color: #93a1bd;
            line-height: 1.5;
        }
        /* Removed .footer-socials and its associated styles */
    </style>
</head>
<body>
    <div id="toast">
        <span id="message"></span>
    </div>

    <!-- Live stream player and its minimized icon are removed -->

    <canvas id="particleCanvas"></canvas>
    <div class="glow-container">
        <div class="left-glow"></div>
        <div class="right-glow"></div>
    </div>
    <object type="image/png" data="/assets/left-rainbet.png" id="leftsvg" height="100%"></object>
    <object type="image/png" data="/assets/right-rainbet.png" id="rightsvg" height="100%"></object>

    <header>
        <nav>
            <div class="logo-title">
                <img src="/assets/logo1.png" alt="Site logo" class="logo">
                <h1 class="title">ProjectGamba</h1>
            </div>
            <ul class="nav-links">
                <li><a href="/leaderboard/rainbet">LEADERBOARDS</a></li>
                <li><a href="/raffle">WEEKLY RAFFLE</a></li>
            </ul>
        </nav>
    </header>

    <div id="appContent">
        <!-- The "COMPETE ON OUR LEADERBOARDs!" section, image, and coin animations are removed -->
        <!-- The Rainbet Promotional Card ("$1,000 and code projectgamba panel") is removed -->

        <!-- Slot Picker Panel -->
        <div class="slot-picker-container">
            <span class="slot-picker-title">Slot Picker</span>
            <div class="slot-picker-app">
                <div class="panel">
                    <h2>Providers</h2>
                    <div class="controls">
                        <button class="btn" id="selectAll">Select All</button>
                        <button class="btn" id="deselectAll">Deselect All</button>
                        <span class="pill" id="status">Loading /slots.csv…</span>
                    </div>
                    <div id="providers" class="row"></div>
                    <small id="counts"></small>
                </div>

                <div class="right">
                    <div class="panel card-wrap">
                        <div class="card" id="card">
                            <div class="card-inner">
                                <div class="face front"><img id="slotImgFront" alt=""></div>
                                <div class="face back"><img id="slotImgBack" alt=""></div>
                            </div>
                        </div>
                    </div>

                    <div class="panel meta">
                        <div>
                            <div class="title" id="slotName">—</div>
                            <div class="sub" id="slotProvider">—</div>
                        </div>
                        <button class="btn" id="pickBtn">Pick A Slot</button>
                    </div>

                    <div class="foot"><small class="pill" id="filterSummary">0 providers selected</small></div>
                </div>
            </div>
        </div>

        <!-- The "Our Socials!" section and social media cards are removed -->
    </div>

    <!-- Footer - Replicated from your original design -->
    <footer class="inner-footer">
        <div class="col-5">
            <div class="content">
                <div class="company"></div><br>
                <span class="copyright">ProjectGamba<br> All Right Reserved 2025.</span>
            </div>
        </div>
        <div class="col">
            <span class="title">Info</span>
            <a href="/" class=""><span class="subtitle">Terms of Service</span></a>
            <a href="/" class=""><span class="subtitle">Privacy Policy</span></a>
        </div>
        <!-- Removed the Socials column from the footer -->
        <div class="col">
            <span class="title">BeGambleAware.com</span>
            <span class="subtitle" style="font-size: 9px;">Responsible Gambling Advisory: While gambling can be entertaining,
                it's crucial to be aware of the associated risks. Exercise self-control,
                set limits, and seek support if needed. Enjoy the excitement responsibly
                and prioritize your well-being. We are not responsible for any losses or damages caused by gambling.
            </span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/js/app.js"></script>
    <script src="/js/particles.js"></script>
    <script src="/js/toast.js"></script>
    <script>
        // The draggable player script is removed as the player is no longer present.

        // PapaParse for CSV parsing - Retained for Slot Picker
        <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
        // Slot Picker's main JavaScript logic - Retained
        <script>
        let allSlots = [], providers = new Set(), selected = new Set();
        const els = {
            providers: document.getElementById('providers'),
            selectAll: document.getElementById('selectAll'),
            deselectAll: document.getElementById('deselectAll'),
            filterSummary: document.getElementById('filterSummary'),
            counts: document.getElementById('counts'),
            pickBtn: document.getElementById('pickBtn'),
            card: document.getElementById('card'),
            slotImgFront: document.getElementById('slotImgFront'),
            slotImgBack: document.getElementById('slotImgBack'),
            slotName: document.getElementById('slotName'),
            slotProvider: document.getElementById('slotProvider'),
            status: document.getElementById('status')
        };

        function upscale(url) {
            if (!url) return url;
            try {
                const u = new URL(url, location.href);
                u.searchParams.set('w', '720');
                u.searchParams.set('h', '944');
                u.searchParams.set('fit', 'min');
                u.searchParams.set('auto', 'format');
                return u.toString();
            } catch (e) { return url; }
        }

        const byProvider = () => allSlots.filter(s => selected.size ? selected.has(s.provider) : true);

        function renderProviders() {
            els.providers.innerHTML = '';
            [...providers].sort().forEach(p => {
                const chip = document.createElement('button');
                chip.className = 'chip' + (selected.has(p) ? ' active' : '');
                chip.textContent = p;
                chip.onclick = () => { selected.has(p) ? selected.delete(p) : selected.add(p); renderProviders(); refreshCounts(); }
                els.providers.appendChild(chip);
            });
            refreshCounts();
        }

        function refreshCounts() {
            els.filterSummary.textContent = `${selected.size} provider${selected.size !== 1 ? 's' : ''} selected`;
            const visible = byProvider().length;
            els.counts.textContent = allSlots.length ? `${visible} of ${allSlots.length} slots match` : '';
        }

        function flipToBack() { els.card.classList.add('flipped'); }
        function flipToFront() { els.card.classList.remove('flipped'); }

        function showImages(url) {
            els.slotImgFront.src = url;
            els.slotImgBack.src = url;
        }

        function pickRandom() {
            const pool = byProvider();
            if (!pool.length) {
                const messageDiv = document.createElement('div');
                messageDiv.style.cssText = `
                    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                    background: #333; color: white; padding: 20px; border-radius: 10px;
                    box-shadow: 0 10px 30px rgba(0,0,0,.35); z-index: 10000; text-align: center;
                `;
                messageDiv.innerHTML = `
                    <p>No slots in current filter.</p>
                    <button class="btn" onclick="this.parentNode.remove()">OK</button>
                `;
                document.body.appendChild(messageDiv);
                return;
            }
            const choice = pool[Math.floor(Math.random() * pool.length)];
            const hi = upscale(choice.image);

            const pre = new Image();
            pre.onload = () => {
                showImages(hi);
                els.slotName.textContent = choice.name;
                els.slotProvider.textContent = choice.provider;
                flipToBack();
            };
            pre.onerror = () => {
                els.slotName.textContent = choice.name;
                els.slotProvider.textContent = `${choice.provider} (image unavailable)`;
                flipToBack();
            };

            if (els.card.classList.contains('flipped')) {
                flipToFront();
                setTimeout(() => pre.src = hi, 350);
            } else {
                setTimeout(() => pre.src = hi, 60);
            }
        }

        async function loadCSV() {
            try {
                const res = await fetch('/slots.csv', { cache: 'no-store' });
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                const text = await res.text();
                const parsed = Papa.parse(text, { header: true, skipEmptyLines: true, transformHeader: h => h.trim().toLowerCase() });
                allSlots = parsed.data.map(r => ({
                    name: (r.name || r.slot || r.title || '').trim(),
                    provider: (r.provider || r.vendor || r.studio || '').trim(),
                    image: (r.image || r.img || r.thumbnail || '').trim()
                })).filter(x => x.name && x.provider && x.image);
                providers = new Set(allSlots.map(s => s.provider));
                selected = new Set(providers);
                renderProviders();
                els.status.textContent = `Loaded ${allSlots.length} slots`;
            } catch (err) {
                els.status.textContent = `Failed to load /slots.csv (${err.message}). Make sure 'slots.csv' is in the root directory.`;
                console.error("Error loading CSV:", err);
            }
        }

        els.selectAll.onclick = () => { selected = new Set(providers); renderProviders(); };
        els.deselectAll.onclick = () => { selected = new Set(); renderProviders(); };
        els.pickBtn.onclick = pickRandom;
        window.addEventListener('keydown', e => { if (e.code === 'Space') { e.preventDefault(); pickRandom(); } });

        loadCSV();
    </script>
</body>
</html>
